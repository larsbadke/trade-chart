<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Trade-Chart Demo</title>
    <link href="src/style.css" rel="stylesheet">
</head>
<body>
<div id="chart"></div>
<script src="bower_components/headjs/dist/1.0.0/head.min.js"></script>
<script>
    head.load("src/sample.js");
    head.load(["bower_components/d3/d3.min.js", "dist/trade-chart.js"], function () {

        var chart = new Chart("#chart", 1200, 800);

        chart.setData(Stock.Data);

        chart.build();

        chart.header(Stock.Name + " " + Stock.ISIN);



        setTimeout(function(){

            var newData = JSON.parse(JSON.stringify(chart.data));

            newData.push({Date: "2015-09-02"});
            newData.push({Date: "2015-09-03"});
            newData.push({Date: "2015-09-04"});
            newData.push({Date: "2015-09-05"});
            newData.push({Date: "2015-09-06"});


//            chart.getLayers()[2].selectAll("line.x")
//                    .data(newData)
//                    .enter()
//                    .attr("class", "x")
//                    .attr("x1", function (d, i) {
//                        if(isFirstTradingDayofMonth(i, newData)){
//                            return chart.x(Date.parse(d.Date));
//                        }
//                    })
//                    .attr("x2",function (d, i) {
//                        if(isFirstTradingDayofMonth(i, newData)){
//                            return chart.x(Date.parse(d.Date));
//                        }
//                    })
//                    .attr("y1", chart.margin.top)
//                    .attr("y2", chart.height - chart.margin.bottom)
//                    .attr("stroke", "#ccc");

//            chart
//                    .x
//                    .transition()
//                    .duration(10)
//                    .domain(newData.map(function (d) {
//                return Date.parse(d.Date);
//            }));

//            var trade = new Trade(chart);
//
//            trade.stoploss(Stock.StopLoss);
//
//            trade.takeprofit(Stock.TakeProfit);
//
//            trade.entry(Stock.Entry);
//
//            trade.exit(Stock.Exit);




        }, 1000);

    });
</script>
</body>
</html>

